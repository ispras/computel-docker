

(тут я смотрю приватный ключ, добавляю его в наш гитлаб и качаю референсы, шаг необязательный каке-то фастки для теста лежат в computel/test)
    2  vim .ssh/authorized_keys
    3  git clone https://gitlab.ispras.ru/bioinformatics/warp.git
    4  find -name NA*
    5  cd warp/
    6  git checkout ispras
    7  find -name NA*
    8  cp ./pipelines/ispras/dna_seq/germline/single_sample/NA12878_20k_H06HDADXX130110.1.ATCACGAT.20k_reads_1.fastq.gz ..
    9  cp ./pipelines/ispras/dna_seq/germline/single_sample/NA12878_20k_H06HDADXX130110.1.ATCACGAT.20k_reads_2.fastq.gz ..
   10  cd

(как установить computel на пустую машину)
    1  git clone https://github.com/lilit-nersisyan/computel.git
   12  cd computel/
   13  ls
   14  sudo apt install dirmngr gnupg apt-transport-https ca-certificates software-properties-common
   27  sudo apt update
   30  sudo apt -y install r-base
   31  R -version
   34  sudo apt install samtools
   99  wget https://github.com/BenLangmead/bowtie2/releases/download/v2.4.4/bowtie2-2.4.4-linux-x86_64.zip
  100  unzip bowtie2-2.4.
  101  unzip bowtie2-2.4.4-linux-x86_64.zip
  102  cd bowtie2-2.4.4-linux-x86_64/
  103  ls
  104  sudo cp bowtie2* /usr/bin/
  106  cd ../
  107  ./computel.sh -1 ~/NA12878_20k_H06HDADXX130110.1.ATCACGAT.20k_reads_1.fastq.gz -2 ~/NA12878_20k_H06HDADXX130110.1.ATCACGAT.20k_reads_2.fastq.gz
  111  file computel_out/tel.length.txt
  112  vim computel_out/tel.length.txt



большие файлы (дают нормальный результат)
  117  wget https://storage.googleapis.com/genomics-public-data/platinum-genomes/fastq/ERR194161_1.fastq.gz
  144  wget https://storage.googleapis.com/genomics-public-data/platinum-genomes/fastq/ERR194161_2.fastq.gz
  171  ./computel.sh -1 /var/local/ERR194161_1.fastq.gz -2 /var/local/ERR194161_2.fastq.gz

----------------------------------------
wget https://github.com/lilit-nersisyan/computel/archive/refs/heads/master.zip
unzip master.zip
cd computel-master/

apk --no-cache add dirmngr
apk --no-cache add gnupg

apk --no-cache add apt-transport-https - беды
Это фиктивный переходный пакет — поддержка https была перенесена в пакет apt
в версии 1.5. Его можно безопасно удалить.

apk --no-cache add ca-certificates

apk --no-cache add software-properties-common - беды
Это программное обеспечение предоставляет средства для управления используемыми
APT-репозиториями. Оно управляет как дистрибутивом, так и независимыми репозиториями программ.

apk --no-cache add R - ? возможно можно как-то использовать образ r-base


Из https://gitlab.ispras.ru/bioinformatics/warp/-/blob/ispras/dockers/ispras/samtools/Dockerfile
для установки samtools
----------------------
FROM alpine:3.8

ARG SAMTOOLS_VERSION=1.11

ENV TERM=xterm-256color \
    SAMTOOLS_URL=https://github.com/samtools/samtools/releases/download/${SAMTOOLS_VERSION}/samtools-${SAMTOOLS_VERSION}.tar.bz2

WORKDIR /usr/gitc

# Install dependencies
RUN set -eux; \
        apk add --no-cache \
            autoconf \
            automake \
            bash \
            bzip2-dev \
            curl-dev \
            gcc \
            libressl-dev \
            make \
            musl-dev \
            ncurses-dev \
            perl \
            tini \
            wget \
            xz-dev \
            zlib-dev \
    ; \
# Install samtools
    mkdir temp; \
    cd temp; \
    \
    wget ${SAMTOOLS_URL}; \
    tar -xf samtools-${SAMTOOLS_VERSION}.tar.bz2; \
    cd samtools-${SAMTOOLS_VERSION}; \
    \
    ./configure; \
    make; \
    make install; \
    \
    rm -r /usr/gitc/temp;

# Set tini as default entrypoint
ENTRYPOINT [ "/sbin/tini", "--" ]

-----------------------------------

# Install samtools
    mkdir temp; \
    cd temp; \
    \
    wget https://github.com/samtools/samtools/releases/download/1.11/samtools-1.11.tar.bz2; \
    tar -xf samtools-1.11.tar.bz2; \
    cd samtools-1.11; \
    \
    ./configure; \
    make; \
    make install; \
    \
    rm -r /temp;

https://github.com/samtools/samtools/releases/download/1.11/samtools-1.11.tar.bz2

wget https://github.com/BenLangmead/bowtie2/releases/download/v2.4.4/bowtie2-2.4.4-linux-x86_64.zip

unzip bowtie2-2.4.4-linux-x86_64.zip
cp bowtie2* /usr/bin/
cp bowtie2* /computel-master/bin/
cp bowtie2* /usr/local/bin/

chmod +x computel.sh

./computel.sh -1 src/examples/tel_reads1.fq.gz -2 src/examples/tel_reads2.fq.gz -o mytest
./computel.sh -1 src/examples/tel_reads1.fq.gz -2 src/examples/tel_reads2.fq.gz -bowb /usr/bin/ -bowal /usr/bin -sam /usr/bin


apk add --update --no-cache python3 && ln -sf python3 /usr/bin/python

apk add libc6-compat

apk add --no-cache \
        perl \
        wget \
        openssl \
        ca-certificates \
        libc6-compat \
        libstdc++ \

-m заменён на  -f в computel.sh

wget https://downloads.sourceforge.net/project/bowtie-bio/bowtie2/2.2.8/bowtie2-2.2.8-linux-x86_64.zip
unzip -d /usr/local bowtie2-2.2.8-linux-x86_64.zip

./computel.sh -1 src/examples/tel_reads1.fq.gz -2 src/examples/tel_reads2.fq.gz -o mytest

apt install pixmap
apt install sp
apt install ade4
apt install segmented